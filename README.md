# pytest_template_SkyPro

## –®–∞–±–ª–æ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ python

### –®–∞–≥–∏
1. –°–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç 'git clone "Pytest Template""'
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
   - _Create a virtual environment:_
     - `python -m venv .venv`
            –∏–ª–∏
     - `py -m venv .venv`
   - _Activate the virtual environment:_
     - On Windows `.venv\Scripts\activate`
     - On macOS/Linux `source .venv/bin/activate`
   - `pip install -r requirements.txt`
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã 'pytest'
    - `pytest -m performance`


py -m services.lighthouse.pagespeed_service

### –°—Ç–µ–∫:
- Pytest
- Selenium
- Requests
- _Sqlalchemy_
- Allure
- config
- Faker
- SpeedTest
- Perfect Pixel

### –°—Ç—Ä—É—Ç–∫—É—Ä–∞:
```mermaid
/pytest_framework                  
‚îÇ‚îÄ‚îÄ ./data/                            # CSV —Ñ–∞–π–ª—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ç–µ—Å—Ç–æ–≤
‚îÇ‚îÄ‚îÄ Reports/                           # CSV —Ñ–∞–π–ª—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ reports_lighthouse/            # –û—Ç—á—ë—Ç—ã –æ—Ç Lighthouse
‚îÇ       ‚îî‚îÄ‚îÄ temp_lighthouse/           # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –æ—Ç Lighthouse
‚îÇ‚îÄ‚îÄ ./POM/                             # Page Object Model
‚îÇ‚îÄ‚îÄ ./REST/                            # REST API - —Ö–µ–ª–ø–µ—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
‚îÇ‚îÄ‚îÄ ./db/                              # —Ö–µ–ª–ø–µ—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ‚îÄ‚îÄ ./test/                            # PyTest —Ç–µ—Å—Ç—ã
‚îÇ    test_speed.py                     # –¢–µ—Å—Ç—ã –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å (–≤—ã–∑—ã–≤–∞—é—Ç —Å–µ—Ä–≤–∏—Å lighthouse)
‚îÇ   ‚îú‚îÄ‚îÄ test_speed.py                  # –¢–µ—Å—Ç—ã –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å (–≤—ã–∑—ã–≤–∞—é—Ç —Å–µ—Ä–≤–∏—Å lighthouse)
‚îÇ   ‚îî‚îÄ‚îÄ conftest.py                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PyTest
‚îÇ‚îÄ‚îÄ ./utils/                           # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ‚îÄ‚îÄ /services/                         # –°–µ—Ä–≤–∏—Å—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–º–∏ –º–æ–¥—É–ª—è–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ ./google/                      # Google API
‚îÇ       ‚îú‚îÄ‚îÄ google_sheets_client.py    # –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ –∏ –ì—É–≥–ª –¥–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ /lighthouse/                  # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å Lighthouse
‚îÇ       ‚îî‚îÄ‚îÄ configs/                   # 
‚îÇ           ‚îú‚îÄ‚îÄ config_lighthouse.py   # üìå –ß—Ç–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ config.ini
‚îÇ           ‚îî‚îÄ‚îÄ –§–∞–π–ª—ã ini –∏ JSON       # üìå
‚îÇ       ‚îî‚îÄ‚îÄ creds/                     # JSON  –¥–æ—Å—Ç—É–ø–∞–º–∏ –∫ API –ì—É–≥–ª–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py                # –î–µ–ª–∞–µ—Ç –ø–∞–∫–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–º
‚îÇ       ‚îú‚îÄ‚îÄ cli_runner.py              # üìå Lighthouse CLI
‚îÇ       ‚îú‚îÄ‚îÄ api_runner.py              # üìå Google Lighthouse API
‚îÇ       ‚îú‚îÄ‚îÄ processor_lighthouse.py    # üìå –ü–∞—Ä—Å–∏–Ω–≥ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–û–ë–©–ò–ô –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏ —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ)
‚îÇ       ‚îú‚îÄ‚îÄ cleaner.py                 # üìå –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
‚îÇ       ‚îî‚îÄ‚îÄ speedtest_service.py       # üìå –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å (–∑–∞–ø—É—Å–∫–∞–µ—Ç CLI/API + –æ–±—Ä–∞–±–æ—Ç–∫—É)
‚îÇ‚îÄ‚îÄ config.ini                         # üìå –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ‚îÄ‚îÄ requirements.txt                   # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ‚îÄ‚îÄ README.md                          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ .gitignore                         # –ò—Å–∫–ª—é—á–∞–µ–º –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã
```

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏
- [–ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ markdown](https://www.markdownguide.org/basic-syntax/)
- [–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ñ–∞–π–ª–∞ gitignore](https://www.toptal.com/developers/gitignore)

### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ (!)
- `pip install pytest`
- `pip install selenium`
- `pip install webdriver-manager`
- numpy



## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–ª–∞–≥–æ–≤ –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤

–í —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Ñ–ª–∞–≥–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≥–∏–±–∫–æ—Å—Ç—å –∏ —É–¥–æ–±—Å—Ç–≤–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–æ–≤ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö (–ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –≤ Docker).

### –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤, –æ–±—ä—è–≤–ª–µ–Ω—ã –≤ —Ñ–∞–π–ª–µ `config.py`. –≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö —Ñ–ª–∞–≥–æ–≤ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–æ–≤.

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–ª–∞–≥–∏

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é `pytest` –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–ª–∞–≥–∏:

- `--browser`: –£–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∏–ø –±—Ä–∞—É–∑–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –î–æ—Å—Ç—É–ø–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
  - `chrome`
  - `firefox`
  - `opera`
  - `edge`
  
  **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**: `chrome`

- `--browser-version`: –£–∫–∞–∑—ã–≤–∞–µ—Ç –≤–µ—Ä—Å–∏—é –±—Ä–∞—É–∑–µ—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–∞, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è –¥–æ—Å—Ç—É–ø–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏–ª–∏ "latest" –¥–ª—è Docker.

- `--headless`: –ó–∞–ø—É—Å–∫–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä –≤ –±–µ–∑–≥–æ–ª–æ–≤–æ–º —Ä–µ–∂–∏–º–µ. –≠—Ç–æ—Ç —Ñ–ª–∞–≥ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å.

- `--screen-resolution`: –£–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±—Ä–∞—É–∑–µ—Ä–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, `1920x1080`.

  **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**: `1920x1080`

- `--user-agent`: –£–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫—É User-Agent, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏. 

  **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**: `Mozilla/5.0`

- `--local`: –£–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ. –≠—Ç–æ—Ç —Ñ–ª–∞–≥ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å.

- `--docker`: –£–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ Docker. –≠—Ç–æ—Ç —Ñ–ª–∞–≥ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å.

- `--contour`: –£–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç—É—Ä —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, `development`, `staging`, `production`.

  **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**: `development`

- `--test-flags`: –ü–æ–∑–≤–æ–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –≤ –≤–∏–¥–µ –∑–∞–ø—è—Ç–æ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, `flag1,flag2`.

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤

1. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Chrome –≤ –±–µ–∑–≥–æ–ª–æ–≤–æ–º —Ä–µ–∂–∏–º–µ:
   ```bash
   pytest --browser=chrome --headless --screen-resolution=1920x1080 --user-agent="Mozilla/5.0" --local
   ```
2. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤ Docker —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Firefox:
   ```bash
   pytest --browser=firefox --headless --docker
   ```
### –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –≤–µ—Ä—Å–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–∞ –≤–µ—Ä—Å–∏—è –±—Ä–∞—É–∑–µ—Ä–∞, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –±—Ä–∞—É–∑–µ—Ä–∞. –ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ Docker, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ "latest" –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è, –µ—Å–ª–∏ –æ–Ω–∞ —É–∫–∞–∑–∞–Ω–∞.