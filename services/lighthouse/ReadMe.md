# üìà Lighthouse Automation Service
> –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏, –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ –∏ SEO –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü —á–µ—Ä–µ–∑ Lighthouse CLI, Google PageSpeed API –∏ Chrome UX Report (CrUX).

### üìå –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- 3 —Ç–∏–ø–∞ —Ç–µ—Å—Ç–æ–≤:
  - CLI –∑–∞–ø—É—Å–∫: –ê–≥—Ä–µ–≥–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –∏–∑ N –∏—Ç–µ—Ä–∞—Ü–∏–π –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ Lighthouse CLI.
  - API –∑–∞–ø—É—Å–∫: –ê–≥—Ä–µ–≥–∞—Ü–∏—è –±–∞–∑–æ–≤—ã—Ö Core Web Vitals —á–µ—Ä–µ–∑ Google PageSpeed Insights API.
  - CrUX —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö: –°–±–æ—Ä —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 28 –¥–Ω–µ–π —á–µ—Ä–µ–∑ CrUX API.
- –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–æ–≤:
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π
  - –°–ø–∏—Å–æ–∫ —Ä–æ—É—Ç–æ–≤
  - –¢–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (desktop/mobile)
  - –≠–º—É–ª—è—Ü–∏—è —Å–µ—Ç–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π –∏ —é–∑–µ—Ä-–∞–≥–µ–Ω—Ç–æ–≤
  - –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π Lighthouse: Performance, Accessibility, Best Practices, SEO
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–∂–∏–º–æ–≤ Lighthouse: Navigation / Snapshot / Timespan
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets:
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü—ã.
    - –ê–≤—Ç–æ–ø–æ–∏—Å–∫ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏ –ø–æ —à–∞–±–ª–æ–Ω–∞–º –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —Ç–µ—Å—Ç–∞ –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
- –ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å –∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
  - –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –∏–ª–∏ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏.
  - –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ .env, .ini –∏ .json —Ñ–∞–π–ª—ã.
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Pytest-–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤.

    

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å
1. #### –°—Ç—Ä—É–∫—Ç—É—Ä–∞
 ‚îî‚îÄ‚îÄ‚îÄ /lighthouse/                  # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å Lighthouse
‚îÇ       ‚îî‚îÄ‚îÄ configs/                   # 
‚îÇ           ‚îú‚îÄ‚îÄ config_lighthouse.py   # üìå –ß—Ç–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ config.ini
‚îÇ           ‚îî‚îÄ‚îÄ –§–∞–π–ª—ã ini –∏ JSON       # üìå
‚îÇ       ‚îî‚îÄ‚îÄ creds/                     # JSON  –¥–æ—Å—Ç—É–ø–∞–º–∏ –∫ API –ì—É–≥–ª–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py                # –î–µ–ª–∞–µ—Ç –ø–∞–∫–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–º
‚îÇ       ‚îú‚îÄ‚îÄ cli_runner.py              # üìå Lighthouse CLI
‚îÇ       ‚îú‚îÄ‚îÄ api_runner.py              # üìå Google Lighthouse API
‚îÇ       ‚îú‚îÄ‚îÄ processor_lighthouse.py    # üìå –ü–∞—Ä—Å–∏–Ω–≥ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–û–ë–©–ò–ô –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏ —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ)
‚îÇ       ‚îú‚îÄ‚îÄ cleaner.py                 # üìå –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
‚îÇ       ‚îî‚îÄ‚îÄ speedtest_service.py       # üìå –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å (–∑–∞–ø—É—Å–∫–∞–µ—Ç CLI/API + –æ–±—Ä–∞–±–æ—Ç–∫—É)

‚îÇ‚îÄ‚îÄ Reports/                           # CSV —Ñ–∞–π–ª—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ reports_lighthouse/            # –û—Ç—á—ë—Ç—ã –æ—Ç Lighthouse
‚îÇ       ‚îî‚îÄ‚îÄ temp_lighthouse/           # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –æ—Ç Lighthouse


2. #### –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—É—Ç—è–º–∏
    –í—Å–µ –ø—É—Ç–∏ –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –¥–æ–ª–∂–Ω—ã —É–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –≤ config_lighthouse.py. –≠—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç:
    –ü—É—Ç–∏ –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤ (REPORTS_DIR).
    –ü—É—Ç–∏ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (TEMP_REPORTS_DIR).
    –ü—É—Ç–∏ –¥–ª—è ChUX –æ—Ç—á–µ—Ç–æ–≤ (CHUX_REPORTS_DIR).
    ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
    - config_lighthouse.env ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∫–ª—é—á–∏ API, ID —Ç–∞–±–ª–∏—Ü Google Sheets)
    - routes.ini ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã—Ö —Ä–æ—É—Ç–æ–≤
    - config_desktop.json, config_mobile.json ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ, —Å–µ—Ç—å, UA)
    - base_urls.ini ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏–π (DEV, TEST, PROD)

    –ü—É—Ç–∏ –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ config_lighthouse.py:
    ```
   # config_lighthouse.py
   ROOT_DIR = Path(__file__).resolve().parents[2]  # –ö–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞
   REPORTS_DIR = ROOT_DIR / "Reports" / "reports_lighthouse"  # –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
   TEMP_REPORTS_DIR = REPORTS_DIR / "temp_lighthouse"  # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
   CHUX_REPORTS_DIR = REPORTS_DIR / "chux_reports"  # –û—Ç—á–µ—Ç—ã ChUX
   
   def ensure_directories_exist():
        """–°–æ–∑–¥–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏."""
        REPORTS_DIR.mkdir(parents=True, exist_ok=True)
        TEMP_REPORTS_DIR.mkdir(parents=True, exist_ok=True)
        CHUX_REPORTS_DIR.mkdir(parents=True, exist_ok=True)


3. #### –ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å
–°–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–º, –Ω–æ –≥–æ—Ç–æ–≤—ã–º –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏. –î–ª—è —ç—Ç–æ–≥–æ:
–í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Google Sheets, Lighthouse CLI) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ø—É—Ç–∏, –∫–ª—é—á–∏ API) –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∏–∑ —Ñ–∞–π–ª–æ–≤ .env –∏–ª–∏ config.ini.
 
2. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ChUX –º–µ—Ç—Ä–∏–∫
2.1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ ChUX –º–µ—Ç—Ä–∏–∫
ChUX –º–µ—Ç—Ä–∏–∫–∏ –≤–∫–ª—é—á–∞—é—Ç:
Core Web Vitals (LCP, FID, CLS).
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (TBT, SI, TTI).
–î–∞–Ω–Ω—ã–µ –∑–∞ 28 –¥–Ω–µ–π (–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è).
3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
3.1. –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è
–°–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—é:
–†–æ—É—Ç—ã: –°–ø–∏—Å–æ–∫ URL –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
–¢–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: desktop –∏–ª–∏ mobile.
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π: –î–ª—è CLI —Ç–µ—Å—Ç–æ–≤.
–ß–∞—Å—Ç–æ—Ç–∞ –∑–∞–ø—É—Å–∫–∞: –î–ª—è ChUX —Ç–µ—Å—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑ –≤ 14 –¥–Ω–µ–π).

 
4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets
4.1. –®–∞–±–ª–æ–Ω—ã –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤
–°–æ–∑–¥–∞–¥–∏–º –æ—Ç–¥–µ–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–ª—è:
CLI –æ—Ç—á–µ—Ç–æ–≤.
API –æ—Ç—á–µ—Ç–æ–≤.
ChUX –æ—Ç—á–µ—Ç–æ–≤.

