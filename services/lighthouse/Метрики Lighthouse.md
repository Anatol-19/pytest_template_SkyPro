Вот оптимизированная и структурированная версия твоей шпаргалки по метрикам Lighthouse, API и CrUX — без потери смысла, с чёткой иерархией, логикой агрегации и пояснениями:

---

## 📊 **Метрики Lighthouse / CrUX — агрегаты, источники, агрегации**

### 🧱 **Основная таблица метрик**

|Код|Метрика (EN)|Русское имя|CLI|API|CrUX|Категория|Ед. изм.|Агрегации|
|---|---|---|---|---|---|---|---|---|
|**P**|Performance Score|Оценка производительности|✔️|✔️|❌|Performance|%|mean, p90|
|**LCP**|Largest Contentful Paint|Крупнейшая отрисовка контента|✔️|✔️|✔️|Core Web Vital|мс|mean (CLI), p75 (CrUX), p90|
|**FCP**|First Contentful Paint|Первая отрисовка контента|✔️|✔️|✔️|Performance|мс|mean, p90, p75|
|**INP**|Interaction to Next Paint|Задержка до следующего отклика|✔️|✔️|✔️|Core Web Vital|мс|mean, p90, p75|
|**CLS**|Cumulative Layout Shift|Накопленный сдвиг макета|✔️|✔️|✔️|Core Web Vital|—|max, p75, p90|
|**TBT**|Total Blocking Time|Общее блокирующее время|✔️|❌|❌|Performance|мс|mean, p90, max|
|**TTI**|Time to Interactive|Время до интерактивности|✔️|❌|❌|Performance|мс|mean, p90|
|**SI**|Speed Index|Индекс скорости|✔️|✔️|❌|Performance|мс|mean, p90|
|**TTFB**|Time to First Byte|Время до первого байта|✔️|✔️|❌|Network|мс|mean, p90|
|**FID**|First Input Delay|Задержка первого ввода (устарело)|❌|❌|✔️|Core Web Vital (устар.)|мс|p75|
|**SEO**|SEO Score|Оценка SEO|✔️|❌|❌|SEO|%|mean|
|**A11Y**|Accessibility Score|Оценка доступности|✔️|❌|❌|Accessibility|%|mean|
|**BP**|Best Practices Score|Лучшие практики|✔️|❌|❌|Best Practices|%|mean|
|**Bootup**|JS Bootup Time|JS время инициализации|✔️|❌|❌|JS Execution|мс|mean, p90|
|**Main**|Main Thread Work|Нагрузка главного потока|✔️|❌|❌|Thread|мс|mean, p90|
|**Reqs**|Request Count|Кол-во сетевых запросов|✔️|❌|❌|Network|count|mean, p90|

---

## 📐 **Подход к агрегации: по типу источника**

### ✅ **CLI (Лаборатория)**:

- 🔹 `p90` — основная оценка UX (реалистично, но не слишком искажено выбросами)
    
- 🔸 `mean` — полезно для трендов и анализа
    
- ⚠️ `max` — только для нестабильных метрик (`CLS`, `TBT`)
    

### ✅ **API (PageSpeed)**:

- Обычно содержит только базовые метрики (CWV + SI + FCP)
    
- Подходит `mean`, `p90` (аналитика похожа на CLI)
    

### ✅ **CrUX (полевые данные)**:

- Строго `p75` — стандарт Google
    
- Нет `avg`, `p90`, `min/max`
    
- Только CWV: `LCP`, `FCP`, `INP`, `CLS`
    

---

## 🎯 **Рекомендуемая агрегация по метрикам**

|Метрика|min|max|mean|p75|p90|Рекомендации|
|---|---|---|---|---|---|---|
|**LCP**|⛔️|⛔️|✅|✅|✅|p75/90 — стандарт|
|**INP**|⛔️|⛔️|✅|✅|✅|с 2024 заменяет FID|
|**CLS**|⛔️|✅|⛔️|✅|✅|max критично|
|**FCP**|⛔️|⛔️|✅|✅|✅|UX-анализ|
|**TBT**|⛔️|✅|✅|⛔️|✅|для чувствительности|
|**TTI**|⛔️|⛔️|✅|⛔️|✅|только CLI|
|**SI**|⛔️|⛔️|✅|⛔️|✅|воспринимаемость|
|**TTFB**|⛔️|✅|✅|⛔️|✅|показывает задержку сервера|

---

## 🚦 **Пороговые значения Core Web Vitals (Google, 2024)**

|Метрика|Good|Needs Improvement|Poor|
|---|---|---|---|
|LCP|≤ 2500 мс|2500–4000 мс|≥ 4000 мс|
|INP|≤ 200 мс|200–500 мс|≥ 500 мс|
|CLS|≤ 0.1|0.1–0.25|≥ 0.25|
|FID|≤ 100 мс|100–300 мс|≥ 300 мс|

---

## 📎 Пример в коде

```python
# CLI
{
  "lcp": {
    "mean": 2300,
    "p90": 3100
  },
  "cls": {
    "max": 0.19,
    "p90": 0.14
  }
}

# CrUX
{
  "lcp": {
    "p75": 2500,
    "good_pct": 68
  }
}
```

---
